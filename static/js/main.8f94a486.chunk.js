(this["webpackJsonpimage-gallery-app"]=this["webpackJsonpimage-gallery-app"]||[]).push([[0],{156:function(e,t,a){e.exports={app:"App_app__IkEqp",backTopBlue:"App_backTopBlue__37Zha"}},210:function(e,t,a){e.exports={photoCard:"PhotoCard_photoCard__135Qz"}},230:function(e,t,a){e.exports=a(469)},235:function(e,t,a){},268:function(e,t){},270:function(e,t){},469:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(7),i=a.n(o),c=(a(235),a(478)),l=a(479),s=a(156),u=a.n(s),d=a(475),p=a(477),f=a(67),m=a(32),h=a(214),g=a(161),E=a(207),y=a.n(E),b=a(31),_=a(225),v=function(e,t,a){return{text:e&&e.trim(),min_taken_date:t&&t.startOf("day").unix(),max_taken_date:a&&a.endOf("day").unix()}},k=a(159),w=function(e,t){switch(t.type){case"SET_NEW_QUERY":return{query:Object(b.a)(Object(b.a)({},t.query),{},{page:1}),loading:!0,error:null,data:null};case"FETCH_ERROR":return{query:e.query,loading:!1,error:t.error,data:e.data};case"FETCH_SUCCESS":var a=Object(b.a)({},t.data);return e.data&&e.data.photos.photo&&(a.photos.photo=[].concat(Object(k.a)(e.data.photos.photo),Object(k.a)(a.photos.photo))),{query:e.query,loading:!1,error:null,data:a};case"REQUEST_FETCH_MORE":return{query:Object(b.a)(Object(b.a)({},e.query),{},{page:e.query.page+1}),loading:!0,error:null,data:e.data};case"REFETCH":return{query:e.query,loading:!0,error:null,data:e.data};default:throw new Error("Unknown action.type ".concat(t.type," in reducer."))}},O=a(208),C=a.n(O),j={flickrApiKey:"".concat("21ca4790f45ca0fb2ab7371c15fb6231")},x=new C.a(j.flickrApiKey),q=function(e){return x.photos.getRecent(e)},T=function(e){return x.photos.search(e)},R=function(e,t,a,r,n,o){var i=e||t||a?T({text:e,min_taken_date:t,max_taken_date:a,page:r,per_page:30}):q({page:r,per_page:30});return i.then(n).catch(o),function(){i&&i.abort()}},N=function(e){var t=Object(r.useMemo)((function(){return v(e.text,e.min_taken_date,e.max_taken_date)}),[e.max_taken_date,e.min_taken_date,e.text]),a=Object(r.useReducer)(w,{query:Object(b.a)(Object(b.a)({},t),{},{page:1}),loading:!0,error:null,data:null}),n=Object(_.a)(a,2),o=n[0],i=n[1];Object(r.useEffect)((function(){i({type:"SET_NEW_QUERY",query:t})}),[i,t]),Object(r.useEffect)((function(){if(o.loading){return R(o.query.text,o.query.min_taken_date,o.query.max_taken_date,o.query.page,(function(e){i({type:"FETCH_SUCCESS",data:e.body})}),(function(e){i({type:"FETCH_ERROR",error:e})}))}}),[o.loading,o.query.text,o.query.min_taken_date,o.query.max_taken_date,o.query.page,i]);var c=Object(r.useCallback)((function(){i({type:"REQUEST_FETCH_MORE"})}),[i]),l=Object(r.useCallback)((function(){i({type:"REFETCH"})}),[i]);return Object(b.a)(Object(b.a)({},o),{},{fetchMore:c,refetch:l})},S=a(473),A=a(68),F=a(474),M=a(470),Y=function(e){var t=e.photo;return n.a.createElement(M.a,{src:"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_s.jpg"),shape:"square",size:145,alt:t.title,title:t.title})},H=a(210),U=a.n(H),W=function(e){var t=e.photo;return n.a.createElement("a",{href:"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_b.jpg"),target:"_blank",rel:"noopener noreferrer"},n.a.createElement(F.a,{className:U.a.photoCard,hoverable:!0,cover:n.a.createElement(Y,{photo:t})}))},I=function(e){var t=e.photos;return n.a.createElement(S.a,{style:{width:800,margin:"auto"},grid:{gutter:28,column:3},dataSource:t,renderItem:function(e){return n.a.createElement(S.a.Item,null,n.a.createElement(W,{photo:e}))}},0===t.length&&n.a.createElement(A.a,null))},D=function(e){var t=e.query,a=N(t),r=a.loading,o=a.error,i=a.data,c=a.fetchMore,l=a.refetch;return n.a.createElement(y.a,{pageStart:1,loadMore:c,hasMore:!r&&!o&&i&&i.photos.page<i.photos.pages},i&&n.a.createElement(I,{photos:i.photos.photo}),i&&i.photos.photo.length>0&&i.photos.page>=i.photos.pages&&n.a.createElement(p.a,{title:"End of result.",subTitle:"End of result."}),r&&n.a.createElement(f.a,null,n.a.createElement(m.a,{span:24,style:{textAlign:"center"}},n.a.createElement(h.a,null))),o&&n.a.createElement(p.a,{status:"error",title:"Request Failed",subTitle:"Please try again later or contact system admin.",style:{padding:16},extra:[n.a.createElement(g.a,{key:0,type:"primary",onClick:l},"Try again")]}))},B=a(472),Q=a(226),L=a(215),P=a(216),z=a(227),G=a(224),J=a(476),K=a(49),V=a.n(K),Z=["value"],$=function(e){Object(z.a)(a,e);var t=Object(G.a)(a);function a(e){var r;return Object(L.a)(this,a),(r=t.call(this,e)).handleChange=function(e){(0,r.props.onChange)(e.trim())},r.handleChange=V()(r.handleChange,300),r}return Object(P.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.value,Object(Q.a)(t,Z));return n.a.createElement(J.a,Object.assign({},a,{onChange:function(t){e.handleChange(t.target.value)}}))}}]),a}(r.Component),X=function(e){var t,a,r=e.form,o=r.getFieldDecorator,i=r.getFieldValue;return n.a.createElement(d.a,{layout:"vertical"},n.a.createElement(d.a.Item,{label:"Search"},o("text")(n.a.createElement($,null))),n.a.createElement(d.a.Item,{label:"Date Taken"},n.a.createElement(f.a,{gutter:16},n.a.createElement(m.a,{xs:12},n.a.createElement(d.a.Item,{style:{marginBottom:0}},o("min_taken_date")(n.a.createElement(B.a,{disabledDate:(a=i("max_taken_date"),function(e){return!(!a||!e)&&e>a}),format:"YYYY-MM-DD",placeholder:"From",style:{width:"100%"}})))),n.a.createElement(m.a,{xs:12},n.a.createElement(d.a.Item,{style:{marginBottom:0}},o("max_taken_date")(n.a.createElement(B.a,{disabledDate:(t=i("min_taken_date"),function(e){return!(!t||!e)&&e<t}),format:"YYYY-MM-DD",placeholder:"To",style:{width:"100%"}})))))))},ee=a(471),te=[{id:"49228050938",owner:"185677780@N06",secret:"e938da6c5f",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"52017322989",owner:"185176283@N07",secret:"a73e772723",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"52017239473",owner:"99414504@N03",secret:"10722ba2cf",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"49228052113",owner:"185947672@N05",secret:"1ba0a8ab6e",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"52017107254",owner:"183178725@N04",secret:"68e1d10b13",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"52017715531",owner:"77531522@N05",secret:"a895e3b3d2",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"52018479811",owner:"185979450@N04",secret:"411297472b",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"52018994425",owner:"147738390@N05",secret:"f031cf1f24",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"52019134948",owner:"77531522@N05",secret:"f787d438b7",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0},{id:"52018090617",owner:"185979450@N04",secret:"4a1fe3a19d",server:"65535",farm:66,title:"photo title",ispublic:1,isfriend:0,isfamily:0}],ae={height:"160px",width:"650px",color:"#fff",lineHeight:"160px",textAlign:"center",background:"#364d79"},re=function(){return n.a.createElement(ee.a,{autoplay:!0},te.map((function(e,t){return n.a.createElement("div",{key:t},n.a.createElement("img",{style:ae,src:"https://farm"+e.farm+".staticflickr.com/"+e.server+"/"+e.id+"_"+e.secret+"_b.jpg",alt:e.title}))})))},ne=d.a.create()((function(e){var t=e.form;return n.a.createElement("div",null,n.a.createElement(re,null),n.a.createElement(X,{form:t}),n.a.createElement(D,{query:t.getFieldsValue()}))})),oe=function(){return n.a.createElement("div",{className:u.a.app},n.a.createElement(c.a,null,n.a.createElement(c.a.Header,null,n.a.createElement("h1",null,"IMAGE GALLERY")),n.a.createElement(c.a.Content,null,n.a.createElement(ne,null),n.a.createElement(l.a,{className:u.a.backTopBlue}))))},ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(n.a.createElement(oe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/image-gallery-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/image-gallery-app","/service-worker.js");ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}()}},[[230,1,2]]]);
//# sourceMappingURL=main.8f94a486.chunk.js.map